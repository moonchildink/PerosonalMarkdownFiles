# 汇编实验



### 大作业



![image-20230128095912070](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128095912070.png)

![image-20230128095948589](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128095948589.png)



![img](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/clip_image001.jpg)





<h1 style='font-size:50px;font-family:"Microsoft Yahei UI";text-align:center;line-height:70px'>
    合肥工业大学<br>
    计算机与信息学院<br>
    实验报告<br>



​    

<p style='font-size:25px;text-align:center;font-family:"宋体";font-weight:bold'>
    课程：汇编语言程序设计
</p>

<p style='font-size:25px;text-align:center;font-family:"宋体";font-weight:bold'>
    专业班级：计科21-4班
</p>

<p style='font-size:25px;text-align:center;font-family:"宋体";font-weight:bold'>
    学号：2021218189
</p>

<p style='font-size:25px;text-align:center;font-family:"宋体";font-weight:bold'>
    姓名：邢智博
</p>


[TOC]

### 实验一





#### 第一题



> 1. 利用DEBUG程序中的“E”命令，将两个多字节数“12345678H”和“FEDCBA98H”分别送入起始地址为DS:0200H和DS:0204H两个单元中；实现将DS:0200H单元和DS:0204H单元中的数据相加，并将运算结果存放在DS:0208H单元中。

​		首先在debug之中使用e命令输入如下的数据：

![image-20230128103033511](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128103033511.png)

​		之后，使用a命令输入如下的代码并且执行：

![image-20230128103234221](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128103234221.png)

​			查看内存之中的内容:

![image-20230128103355529](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128103355529.png)



____

#### 第二题



> 2. X、Y、Z、V均为字变量，在X、Y、Z、V字单元中存放是16位带符号数。试编写汇编语言程序完成以下功能：计算表达式值（V–（X*Y+Z-720））/X，将运算结果整数放在SUM1单元，余数放在SUM2单元。
>
>     实验提示（参考第3章和Debug部分的PPT）：
>
>     （1） 在DOSBOX编译链接成可执行文件后，使用Debug装入内存。
>
>     （2） 使用U命令反汇编代码，并与源文件比对，需要注意数据段名、变量转入内存后的形式。
>
>     （3） 分别在G命令执行前后，使用D命令查看各个变量的值。

1. 汇编源程序

```assembly
assume cs:code,ds:data
data segment
    x dw 12
    y dw -123
    z dw 1234
    v dw 4312
    sum1 dw 0
    sum2  dw 0
data ends

code segment
    mov ax,data
    mov ds,ax

    mov ax,x
    imul y    ; 两个十六位数相乘会将计算结果的高位放在dx之中，低位放在ax之中
    add ax,z
    adc dx,0
    sub ax,720
    sbb dx,0  ; 减去借位
    mov cx,0
    mov bx,v
    sub bx,ax
    sbb cx,0
    mov dx,cx
    mov ax,bx
    idiv word ptr x
    mov sum1,ax
    mov sum2,dx
code ends
end
```

2. 编译链接，在debug之中进行调试：

![image-20230128142123940](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128142123940.png)

![image-20230128142234258](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128142234258.png)

3. 执行

![image-20230128142313534](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128142313534.png)





#### 第三题

> BL中的只有一位为0，编写程序测试0所在的位数（从左编号，最左边为第0位），并输出提示信息“The X Bit is 0”（X为0、1、2、3…7），要求使用地址表方法实现。

1. 汇编源程序

```assembly
assume ds:data,cs:code

data segment
	table dw zero,one,two,three,four,five,sex,seven    ; 输出字符串偏移地址表
	zero db 'The x bit is 0',0dh,0ah,'$'  ;应该还需要添加结束字符$ or 0
	one db 'the x bit is 1',0dh,0ah,'$'
	two db 'the x bit is 2',0dh,0ah,'$'
	three db 'the x bit is 3',0dh,0ah,'$'
	four db 'the x bit is 5',0dh,0ah,'$'
	five db 'the x bit is 6',0dh,0ah,'$'
	sex db 'the x bit is 7',0dh,0ah,'$'
	seven db'the x bit is 8',0dh,0ah,'$'
data ends

code segment
start:
	mov ax,data
	mov ds,ax
	mov bx,0011h
	;判断哪一位是1
    ;不断对bl进行右移，当移出的字符为2时进行输出跳转
    mov bl,1efh ;要进行判断的数据
    mov cx,0    ;移位计数器
s:  shr bl,1
    ; cmp cf,1    ;如果进位标志寄存器致中的数据是0
	mov ax,1
	adc ax,1
	cmp ax,1
    je show
	inc cx
	loop s
	mov ax,4c00h
	int 21h
show:  
	mov si,cx
	add si,si
	mov dx,[bx+si]   ;将字符串的偏移地址送入到dx之中
	mov ah,09h
	int 21h

code ends
end
```

2. 编译链接，在debug之中查看数据在debug之中的存储形式，如下图：

![image-20230128184543205](https://cdn.jsdelivr.net/gh/moonchildink/image@main/imgs/image-20230128184543205.png)

可以发现：第一行存储了每个数组成员相对起始地址的相对偏移量，所以可以使用`ds:[bx+idata]`方式访问表中的数据

3. 运行程序，查看运行结果



